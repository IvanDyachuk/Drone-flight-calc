import time # (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –¥–∞—Ç—ã)
import datetime

def calc_flight(mah, amps):
    battery_ah = mah / 1000
    hours = battery_ah / amps
    return hours * 60

print("--- DRONE CALCULATOR v4.0 (Logging) ---")

while True:
    try:
        # 1. –í–í–û–î
        input_str = input("\n–í–≤–µ–¥–∏—Ç–µ –µ–º–∫–æ—Å—Ç—å (mAh) –∏–ª–∏ 0 –¥–ª—è –≤—ã—Ö–æ–¥–∞: ")
        user_input = float(input_str)

        if user_input == 0:
            print("–í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã...")
            break
            
        current = float(input("–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫ (A): "))
        now = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        # -----------------------------------------------------------
        # –í–ï–°–¨ –ë–õ–û–ö –ù–ò–ñ–ï –ó–ê–í–ò–°–ò–¢ –û–¢ –£–°–ü–ï–®–ù–û–ì–û –í–í–û–î–ê
        # –ü–æ—ç—Ç–æ–º—É –æ–Ω —Ç–æ–∂–µ —Å–¥–≤–∏–Ω—É—Ç –≤–ø—Ä–∞–≤–æ (–Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ try)
        # -----------------------------------------------------------
        
        # 2. –†–ê–°–ß–ï–¢
        result = calc_flight(user_input, current)
        print(f"‚úÖ –í—Ä–µ–º—è –ø–æ–ª–µ—Ç–∞: {round(result, 1)} –º–∏–Ω")
        
        # 3. –ó–ê–ü–ò–°–¨ –í –§–ê–ô–õ (–¢–æ–∂–µ –≤–Ω—É—Ç—Ä–∏ try!)
        log_entry = f"–î–∞—Ç–∞: {now}, –ë–∞—Ç–∞—Ä–µ—è: {user_input}mAh, –¢–æ–∫: {current}A -> {round(result, 1)} –º–∏–Ω\n"
        
        # 'a' (append) - –¥–æ–ø–∏—Å–∞—Ç—å –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞
        # encoding='utf-8' - —á—Ç–æ–±—ã —Ä—É—Å—Å–∫–∏–µ –±—É–∫–≤—ã —á–∏—Ç–∞–ª–∏—Å—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ
        with open("flight_log.txt", "a", encoding="utf-8") as file:
            file.write(log_entry)
            print("üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ —Ñ–∞–π–ª.")

        # -----------------------------------------------------------

    except ValueError:
        # –ï—Å–ª–∏ –≤–≤–æ–¥ —Å–ª–æ–º–∞–ª—Å—è –í –õ–Æ–ë–û–ú –ú–ï–°–¢–ï –≤–Ω—É—Ç—Ä–∏ try ‚Äî –º—ã –ø–∞–¥–∞–µ–º —Å—é–¥–∞
        print("‚ùå –û—à–∏–±–∫–∞: –í–≤–æ–¥–∏—Ç–µ —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")